# VIP/Pico

An emulator of COSMAC VIP on Raspberry Pi Pico, with NTSC output. 


![RoundUp](doc/roundup.jpg) ![Case](doc/case.jpg)


## Disclaimers

This is not a "stable release."
In particular, concerning the hardware portion, 
I can't guarantee that it does not break the peripherals. 
All I can say is that it is working for me. 


### Disclaimers(detailed)

- The timing for the video signal is not robustly designed. 
Sometimes you may see glitches on the screen. 
- The video signal is non-interlaced with 262 lines, 
which I think is quite similar to the one generated by CDP1861. 
On my TV, I see the screen tremble about once a second. 
- The circuit for Tape R/W is a result of trial and error. 
It is meant to be connected to a PC via a USB interface. 
I don't know if it is what it should be. 


## Hardware

![Schematic](doc/vip_pico_schematic.png)

Powered via USB. 

- Connect the VIDEO output and GND to the TV through RCA connector. 
- Connect a keypad for Arduino (there are many, and I guess they are similar). 
The keyboard layout is the same as on COSMAC VIP. 
- I don't know if the tape in/out circuit works with a cassette tape recorder. 
I connect it to a PC using a USB interface 
(https://www.elecom.co.jp/products/USB-AADC01BK.html), 
and record with Audacity, 
with mic level around 70, without audio adjustment, without AGC. 
![Recording](doc/screenshot_audacity.png)
No adjustment for audio output, with high output level. 


## Software

Transfer build/pico_vip.uf2 to Raspberry Pi Pico. 
A minimal ROM and 
[CosmacDriving](https://github.com/AutomaticComputer/CosmacDriving) 
are included in this image. 

If you boot(or reset) while pressing "0," 
CosmacDriving is read into the memory and executed. 
If you boot with "C" pressed, 
or if the data at 0000 is 0 at the boot time, 
a program is executed which only displays "VIP/Pico". 

The amount of RAM is 32KB, 
and Simple Sound Board is also emulated. 


## Transferring programs for VIP

You can write ROM and RAM images into flash via USB serial. 
The size of a ROM/RAM image must be exactly 512/4096 bytes, respectively. 

For the ROM, the "Operating System" from "Instruction Manual" (linked below) is recommended. 

- Set RESET/RUN switch to the "RUN" position while pressing "F", 
and use an appropriate terminal application to connect via USB serial. 
- Press "h" for a help. 
- To write to ROM, press "r" on the terminal, 
and send a file (512 bytes) as binary. 
It is written to the memory starting at address 8000. 
- To write to RAM, press one of "0" to "b," 
and send a file (4096 bytes) as binary. 
The starting address is 0. 
- To send the contents of RAM to PC, press "d", specify the log file (binary), 
and press a key on the terminal. 
(You may see some garbages on the terminal.)
- To terminate the transfer mode, you have to shut down the pico. 
- To start "Operating System", 
set RESET/RUN switch to the "RUN" position while pressing "C."
To load a program on the flash to RAM and execute it, 
set RESET/RUN switch to the "RUN" position while pressing one of "0" to "B."


### Links

[COSMAC 研究会(かんぱぱさん) (in Japanese)](https://kanpapa.com/cosmac/)

[COSMAC (in Japanese)](http://www.st.rim.or.jp/~nkomatsu/miscproc/CDP1802.html)

[Emma 02](https://www.emma02.hobby-site.com/)


#### Hagley Digital Archives

Documents at Digital Archives of Hagley Museum, donated by RCA. 

- [COSMAC VIP Instruction Manual](https://digital.hagley.org/LMSS_246409_873_11)
contains "Operating System," CHIP-8 and 20 programs. 
- [COSMAC VIP Game Manual](https://digital.hagley.org/LMSS_246409_873_12)
- [COSMAC VIP Game Manual II](https://digital.hagley.org/MSS_246477_MA1210_011)

#### Periodicals etc.

- [VIPER](https://github.com/mattmikolay/viper) 
- [PIPs for VIPS](https://github.com/TomSwan/pips-for-vips)
- [News letters for COSMAC Elf](http://www.cosmacelf.com/publications/newsletters/)


## Software for COSMAC VIP

[Software for COSMAC VIP(in Japanese)](doc/software.md)


## Changes



## Acknowledgements

I learned about video signals mainly from 
[TVout](https://github.com/Avamander/arduino-tvout) for Arduino, 
although I didn't use the code itself. 
